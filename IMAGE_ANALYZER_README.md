# Анализатор изображений с Llama

Скрипты для анализа изображений с помощью локальной Llama через Ollama API.

## Файлы

- `image_analyzer.py` - Полнофункциональный анализатор с выбором модели
- `quick_image_test.py` - Быстрый тест с предустановленной моделью
- `IMG_7386.JPG` - Тестовое изображение (расписание уроков)

## Требования

1. **Ollama** должен быть установлен и запущен
2. **Модель для анализа изображений** (например, `llava`, `llava:7b`, `llava:13b`)
3. **Python зависимости**: `aiohttp`

## Установка модели

```bash
# Установка популярной модели для анализа изображений
ollama pull llava

# Или более мощная версия
ollama pull llava:13b
```

## Использование

### 1. Полный анализатор (с выбором модели)

```bash
python image_analyzer.py
```

Скрипт:
- Покажет список доступных моделей
- Позволит выбрать модель
- Позволит ввести свой промт или использовать стандартный
- Проанализирует изображение `IMG_7386.JPG`

### 2. Быстрый тест

```bash
python quick_image_test.py
```

Использует предустановленную модель `llava` и стандартный промт.

## Настройка

### Изменение URL Ollama

```bash
export OLLAMA_BASE_URL="http://192.168.1.75:11434"
python image_analyzer.py
```

### Изменение изображения

Отредактируйте переменную `IMAGE_PATH` в скриптах или переименуйте ваше изображение в `IMG_7386.JPG`.

## Примеры промтов

- `"Что изображено на этой картинке? Опиши подробно, что ты видишь."`
- `"Опиши это изображение на русском языке"`
- `"Какие цвета преобладают на картинке?"`
- `"Есть ли на изображении текст? Если да, то какой?"`

## Возможные проблемы

### 1. Модель не найдена
```
❌ Ошибка API: HTTP 404
```
**Решение**: Установите модель для анализа изображений:
```bash
ollama pull llava
```

### 2. Сервер недоступен
```
❌ Ошибка подключения к Ollama
```
**Решение**: Убедитесь, что Ollama запущен:
```bash
ollama serve
```

### 3. Таймаут
```
❌ Таймаут при анализе изображения
```
**Решение**: Попробуйте меньшую модель или увеличьте таймаут в коде.

## Поддерживаемые модели

- `llava` - Базовая модель для анализа изображений
- `llava:7b` - 7B параметров
- `llava:13b` - 13B параметров (требует больше ресурсов)
- `llava:34b` - 34B параметров (требует много ресурсов)

## Технические детали

- Изображения кодируются в base64
- Используется Ollama API `/api/generate`
- Поддержка потокового и обычного режимов
- Таймаут 120 секунд для анализа
