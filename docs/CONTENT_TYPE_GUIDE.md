# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é TextContentType

## –ü—Ä–æ–±–ª–µ–º–∞

–†–∞–Ω—å—à–µ –≤ –±–æ—Ç–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ **–¥–≤–æ–π–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ MarkdownV2:

```python
# ‚ùå –°–¢–ê–†–´–ô –ö–û–î (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û)
# handlers.py
safe_error_text = TelegramFormatter.escape_markdown_v2(str(e))  # –ü–µ—Ä–≤–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

# TelegramMessageSender.safe_edit_message_text()
markdown_text = TelegramFormatter.smart_escape_markdown_v2(text)  # –í—Ç–æ—Ä–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ!

# –†–µ–∑—É–ª—å—Ç–∞—Ç: parse_mode ‚Üí parse\_mode ‚Üí parse\\_mode ‚ùå
```

## –†–µ—à–µ–Ω–∏–µ

–í–≤–µ–¥–µ–Ω `TextContentType` enum –¥–ª—è —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥–≤–æ–π–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

**–ü—Ä–∏–Ω—Ü–∏–ø:** –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¢–û–õ–¨–ö–û –≤ `TelegramMessageSender`, –Ω–∏–∫–æ–≥–¥–∞ –≤ handlers.

## –¢–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 1. TextContentType.RAW

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–æ—à–∏–±–∫–∏, —Å—Ç–∞—Ç—É—Å, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π `telegram.helpers.escape_markdown(version=2)`

**–ü—Ä–∏–º–µ—Ä:**

```python
from telegram_formatter import TextContentType

await TelegramMessageSender.safe_edit_message_text(
    query,
    f"‚ùå –û—à–∏–±–∫–∞: {str(error)}",
    content_type=TextContentType.RAW  # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚ùå –û—à–∏–±–∫–∞: Unsupported parse\_mode ‚úÖ
```

### 2. TextContentType.FORMATTED (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –¢–µ–∫—Å—Ç —Å Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º (`**bold**`, `_italic_`)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `TelegramFormatter.smart_escape_markdown_v2()`
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `**text**` ‚Üí `*text*`
- –ù–ï —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç `_` –≤–Ω—É—Ç—Ä–∏ —Å–ª–æ–≤ (parse_mode –æ—Å—Ç–∞–µ—Ç—Å—è parse_mode)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫—É—Ä—Å–∏–≤ `_text_`

**–ü—Ä–∏–º–µ—Ä:**

```python
await TelegramMessageSender.safe_edit_message_text(
    query,
    result['display_text'],  # –°–æ–¥–µ—Ä–∂–∏—Ç **–∂–∏—Ä–Ω—ã–π** –∏ _–∫—É—Ä—Å–∏–≤_
    content_type=TextContentType.FORMATTED  # –£–º–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç: *–∂–∏—Ä–Ω—ã–π* –∏ _–∫—É—Ä—Å–∏–≤_ ‚úÖ
```

### 3. TextContentType.TECHNICAL

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç (–∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –º–µ—Ç–æ–¥–æ–≤, –∫–æ–¥—ã)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤ backticks \``text`\`

**–ü—Ä–∏–º–µ—Ä:**

```python
await TelegramMessageSender.safe_edit_message_text(
    query,
    f"–û—à–∏–±–∫–∞ –≤ –º–µ—Ç–æ–¥–µ: {method_name}",
    content_type=TextContentType.TECHNICAL
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç: –û—à–∏–±–∫–∞ –≤ –º–µ—Ç–æ–¥–µ: `parse_mode` ‚úÖ
```

## –ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–¥–∞

### ‚ùå –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):

```python
# handlers.py
safe_error_text = TelegramFormatter.escape_markdown_v2(str(e))

await TelegramMessageSender.safe_edit_message_text(
    query,
    f"‚ùå –û—à–∏–±–∫–∞: {safe_error_text}"
)
```

### ‚úÖ –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):

```python
# handlers.py
from telegram_formatter import TextContentType

await TelegramMessageSender.safe_edit_message_text(
    query,
    f"‚ùå –û—à–∏–±–∫–∞: {str(e)}",
    content_type=TextContentType.RAW  # –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
)
```

## –ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–ù–ï —ç–∫—Ä–∞–Ω–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç –≤—Ä—É—á–Ω—É—é** –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º `TelegramMessageSender`
2. **–í—Å–µ–≥–¥–∞ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ `content_type`** –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞
3. **RAW** - –¥–ª—è –æ—à–∏–±–æ–∫ –∏ –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
4. **FORMATTED** - –¥–ª—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–π –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
5. **TECHNICAL** - –¥–ª—è –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –º–µ—Ç–æ–¥–æ–≤, –∫–æ–¥–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã

### –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

```python
await TelegramMessageSender.safe_edit_message_text(
    query,
    f"‚ùå –û—à–∏–±–∫–∞: {str(exception)}",
    content_type=TextContentType.RAW
)
```

### –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —á–∞—Ç–∞

```python
# –í chat_analyzer.py —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç **–∂–∏—Ä–Ω—ã–π** —Ç–µ–∫—Å—Ç
result = {
    'display_text': "*üìù –í–∞–∂–Ω–æ:* –∫–æ–Ω–∫—É—Ä—Å **–∑–∞–≤—Ç—Ä–∞**"
}

# –í handlers.py
await TelegramMessageSender.safe_edit_message_text(
    query,
    result['display_text'],
    content_type=TextContentType.FORMATTED  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
)
```

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

```python
await TelegramMessageSender.safe_edit_message_text(
    query,
    f"–ú–µ—Ç–æ–¥ {method_name} –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π",
    content_type=TextContentType.TECHNICAL
)
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. ‚úÖ **–ù–µ—Ç –¥–≤–æ–π–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** - –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞
2. ‚úÖ **–Ø–≤–Ω–æ—Å—Ç—å** - —á–µ—Ç–∫–æ –≤–∏–¥–Ω–æ, –∫–∞–∫–æ–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
3. ‚úÖ **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** - —Ç–æ–ª—å–∫–æ –≤ TelegramMessageSender
4. ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤** - telegram.helpers –¥–ª—è RAW
5. ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é FORMATTED
6. ‚úÖ **–õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** - –ø—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ if/elif

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ù–ï —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç–µ —Ç–µ–∫—Å—Ç –≤—Ä—É—á–Ω—É—é
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `content_type`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –æ–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

```
DEBUG: Content type: TextContentType.RAW
DEBUG: Using telegram.helpers.escape_markdown() for RAW content
```

## FAQ

**Q: –ö–∞–∫–æ–π content_type –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?**  
A: `TextContentType.FORMATTED` - –æ–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

**Q: –ù—É–∂–Ω–æ –ª–∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º TelegramMessageSender?**  
A: –ù–ï–¢! –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —ç–∫—Ä–∞–Ω–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç –≤—Ä—É—á–Ω—É—é. –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å —Å–∏–º–≤–æ–ª–∞–º–∏ _ ?**  
A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `TextContentType.RAW` - –æ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ —Å–∏–º–≤–æ–ª—ã.

**Q: –ú–æ–∂–Ω–æ –ª–∏ —Å–º–µ—à–∏–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç?**  
A: –î–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `TextContentType.FORMATTED` –∏ –≤—Å—Ç–∞–≤–ª—è–π—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –≤ backticks –≤—Ä—É—á–Ω—É—é.

